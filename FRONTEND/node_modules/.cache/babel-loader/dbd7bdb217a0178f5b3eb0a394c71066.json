{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/hp/Desktop/maqaayo/projectmaqaayo/FRONTEND/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/hp/Desktop/maqaayo/projectmaqaayo/FRONTEND/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/hp/Desktop/maqaayo/projectmaqaayo/FRONTEND/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{TextField,Typography,Grid,Button}from'@material-ui/core';import{Card,CardMedia,CardContent,CardActions,IconButton,Paper}from'@material-ui/core';import{api}from'../../COMPONENTS/axiosSetup';import DeleteIcon from'@material-ui/icons/Delete';import{Link}from'react-router-dom';import DoneIcon from'@material-ui/icons/Done';import Navbar from'../../COMPONENTS/Navbar/Navbar';// import  getName  from './OrderedProducts'\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function FulfilledOr(){if(sessionStorage.getItem('role')=='admin'){}else{window.location.replace('/');}var _useState=useState([]),_useState2=_slicedToArray(_useState,2),orders=_useState2[0],setOrders=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),customer=_useState4[0],setCustomers=_useState4[1];function getCusOrders(){return _getCusOrders.apply(this,arguments);}function _getCusOrders(){_getCusOrders=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return api.get('/get/cus/fulfilled');case 2:_context.next=4;return _context.sent.data;case 4:data=_context.sent;setCustomers(data);case 6:case\"end\":return _context.stop();}}},_callee);}));return _getCusOrders.apply(this,arguments);}useEffect(function(){getCusOrders();},[]);function getOrders(){return _getOrders.apply(this,arguments);}function _getOrders(){_getOrders=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return api.get('/get/received/orders');case 2:_context2.next=4;return _context2.sent.data;case 4:data=_context2.sent;setOrders(data);case 6:case\"end\":return _context2.stop();}}},_callee2);}));return _getOrders.apply(this,arguments);}useEffect(function(){getOrders();},[]);function importAll(r){var images={};r.keys().map(function(item,index){images[item.replace('./','')]=r(item);});return images;}var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),q=_useState6[0],setQ=_useState6[1];var images=importAll(require.context('../../IMAGES',false,/\\.(png|jpe?g|svg)$/));// const [totalV, setTotalV] = useState([])\nfunction ORDERS(_ref){var name=_ref.name;var totalValues=[];var newList=orders.filter(function(order){return order.cusname==name;});var total=0;for(var i=0;i<newList.length;i++){var item=newList[i];total=total+item.quantity*item.price;}totalValues.push(total);// setTotalV(totalValues)\nif(newList.length){return newList.map(function(item){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Card,{style:{margin:'20px',padding:'20px'},children:[/*#__PURE__*/_jsxs(CardContent,{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsx(CardMedia,{image:images[item.image],style:{width:'100px',height:'100px',borderRadius:'100%'}}),/*#__PURE__*/_jsx(Typography,{variant:\"h5\",style:{fontWeight:'bold'},children:item.magac}),/*#__PURE__*/_jsxs(Typography,{style:{fontWeight:'bold'},children:[\"$\",item.price]})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Typography,{style:{fontWeight:'bold'},children:[\"Qty:\",item.quantity]})})]}),/*#__PURE__*/_jsxs(Typography,{children:[\"$\",total]})]});});}// }\n}function deleteCusOrder(_x){return _deleteCusOrder.apply(this,arguments);}function _deleteCusOrder(){_deleteCusOrder=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(id){var newList,data;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:newList=customer.filter(function(cus){return cus.id!=id;});setCustomers(newList);_context3.next=4;return api.patch('/delete/cus/fulfilled/order',{id:id});case 4:_context3.next=6;return _context3.sent.data;case 6:data=_context3.sent;if(data.status){}case 8:case\"end\":return _context3.stop();}}},_callee3);}));return _deleteCusOrder.apply(this,arguments);}if(!customer.length){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",align:\"center\",style:{marginTop:'100px'},children:\"WAX DALAB AH OO LA FULIYAY MA JIRAAN.\"})]});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Grid,{container:true,style:{marginTop:'30px',margin:'30px',minHeight:'900px',overflowY:'scroll'},children:[/*#__PURE__*/_jsx(Grid,{item:true,sm:12,xs:12,gutterBottom:true,style:{margin:'50px'},children:/*#__PURE__*/_jsx(Typography,{variant:\"h3\",align:\"center\",children:\"DALABYADA FULIYAY\"})}),customer.map(function(cus,index){return/*#__PURE__*/_jsx(Grid,{item:true,sm:4,xs:12,md:3,style:{margin:'20px',position:'relative'},children:/*#__PURE__*/_jsxs(Card,{style:{padding:'30px'},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h4\",children:[\"Magac : \",cus.magac]}),/*#__PURE__*/_jsxs(Typography,{variant:\"h5\",children:[\"Telephone : \",/*#__PURE__*/_jsx(\"b\",{children:cus.telepphone})]}),/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",children:[\"Taariikh : \",/*#__PURE__*/_jsx(\"b\",{children:new Date(cus.taariikh).toLocaleDateString()})]}),/*#__PURE__*/_jsx(ORDERS,{name:cus.magac}),/*#__PURE__*/_jsx(DeleteIcon,{variant:\"contained\",color:\"danger\",style:{fontSize:'30px',cursor:'pointer'},onClick:function onClick(){deleteCusOrder(cus.id);}})]})});})]})})]});}export default FulfilledOr;","map":{"version":3,"names":["React","useState","useEffect","TextField","Typography","Grid","Button","Card","CardMedia","CardContent","CardActions","IconButton","Paper","api","DeleteIcon","Link","DoneIcon","Navbar","FulfilledOr","sessionStorage","getItem","window","location","replace","orders","setOrders","customer","setCustomers","getCusOrders","get","data","getOrders","importAll","r","images","keys","map","item","index","q","setQ","require","context","ORDERS","name","totalValues","newList","filter","order","cusname","total","i","length","quantity","price","push","margin","padding","display","justifyContent","alignItems","image","width","height","borderRadius","fontWeight","magac","deleteCusOrder","id","cus","patch","status","marginTop","minHeight","overflowY","position","telepphone","Date","taariikh","toLocaleDateString","fontSize","cursor"],"sources":["C:/Users/hp/Desktop/maqaayo/projectmaqaayo/FRONTEND/src/PAGES/FulfilledOrders/FulfilledOr.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { TextField, Typography, Grid, Button } from '@material-ui/core'\r\nimport { Card, CardMedia, CardContent, CardActions, IconButton, Paper } from '@material-ui/core';\r\nimport { api } from '../../COMPONENTS/axiosSetup';\r\nimport DeleteIcon from '@material-ui/icons/Delete'\r\nimport { Link } from 'react-router-dom';\r\nimport DoneIcon from '@material-ui/icons/Done'\r\nimport Navbar from '../../COMPONENTS/Navbar/Navbar';\r\n// import  getName  from './OrderedProducts'\r\nfunction FulfilledOr() {\r\n  if(sessionStorage.getItem('role') == 'admin') {\r\n     \r\n  }else{\r\n    window.location.replace('/')\r\n  }\r\n  const [orders, setOrders] = useState([])\r\n\r\n  const [customer, setCustomers] = useState([])\r\n  async function getCusOrders(){\r\n    const data = await( await api.get('/get/cus/fulfilled')).data\r\n    setCustomers(data)\r\n \r\n  }\r\nuseEffect(()=>{\r\n    getCusOrders()\r\n}, [])\r\n\r\nasync function getOrders(){\r\n  const data = await (await api.get('/get/received/orders')).data\r\n  setOrders(data)\r\n}\r\nuseEffect(()=>{\r\ngetOrders()\r\n}, [])\r\nfunction importAll(r) {\r\n  let images = {};\r\n  r.keys().map((item, index) => { images[item.replace('./', '')] = r(item); });\r\n  return images;\r\n}\r\nconst [q, setQ] = useState(0)\r\n\r\n\r\nconst images = importAll(require.context('../../IMAGES', false, /\\.(png|jpe?g|svg)$/));\r\n\r\n// const [totalV, setTotalV] = useState([])\r\nfunction ORDERS({name}){\r\n  const totalValues = []\r\n    const newList =   orders.filter(order=> order.cusname == name)\r\n    let total = 0\r\n    for(let i = 0; i<newList.length; i++){\r\n      const item = newList[i]\r\n      total = total + (item.quantity * item.price)\r\n    }\r\n    totalValues.push(total)\r\n    // setTotalV(totalValues)\r\n\r\n\r\n    if(newList.length){\r\n     \r\n         return( newList.map(item=>{\r\n            return (\r\n              <>\r\n             <Card style={{margin:'20px', padding:'20px'}} >\r\n             <CardContent style={{display:'flex', justifyContent:'space-between', alignItems:'center'}}>\r\n             <CardMedia  image={images[item.image]} style={{width:'100px', height:'100px', borderRadius:'100%'}} />\r\n              <Typography variant='h5' style={{fontWeight:'bold'}}>{item.magac}</Typography>\r\n              <Typography style={{fontWeight:'bold'}}>${item.price}</Typography>\r\n             </CardContent>\r\n              <div>\r\n              <Typography style={{fontWeight:'bold'}}>Qty:{item.quantity}</Typography>\r\n              </div>\r\n             </Card>\r\n             <Typography>${total}</Typography>\r\n              </>\r\n            )\r\n         \r\n          })\r\n         )\r\n    \r\n        \r\n\r\n    }\r\n\r\n  // }\r\n\r\n }\r\n\r\n\r\n\r\n async function deleteCusOrder(id){\r\n  const newList = customer.filter(cus=> cus.id != id)\r\n  setCustomers(newList)\r\n   const data =  await (await api.patch('/delete/cus/fulfilled/order', {id})).data\r\n\r\n   if(data.status){\r\n   \r\n   }\r\n }\r\n\r\n if(!customer.length){\r\n  return (\r\n  <>\r\n    <Navbar />\r\n   <Typography variant='h4' align='center' style={{marginTop:'100px'}}>WAX DALAB AH OO LA FULIYAY MA JIRAAN.</Typography>\r\n  </>\r\n\r\n  )\r\n }\r\n\r\n  return (\r\n    <>\r\n    <Navbar />\r\n    <div>\r\n        \r\n      <Grid container style={{marginTop:'30px', margin:'30px', minHeight:'900px', overflowY:'scroll'}}>\r\n     \r\n        <Grid item sm={12} xs={12} gutterBottom style={{margin:'50px'}}>\r\n            <Typography variant=\"h3\" align='center'>DALABYADA FULIYAY</Typography>\r\n        </Grid>\r\n        \r\n        {customer.map((cus, index)=>{\r\n          return (\r\n\r\n      <Grid item sm={4} xs={12} md={3} style={{margin:'20px', position:'relative'}}>\r\n           <Card style={{padding:'30px'}}>\r\n            <Typography variant='h4'>Magac : {cus.magac}</Typography>\r\n            <Typography variant='h5'>Telephone : <b>{cus.telepphone}</b></Typography>\r\n            <Typography variant='h6'>Taariikh : <b>{new Date(cus.taariikh).toLocaleDateString()}</b></Typography>\r\n            <ORDERS name={cus.magac} />\r\n            <DeleteIcon variant='contained' color='danger' style={{fontSize:'30px', cursor:'pointer'}} onClick={()=>{\r\n              deleteCusOrder(cus.id)\r\n            }} />\r\n\r\n           </Card>\r\n\r\n           \r\n        </Grid>\r\n          )\r\n        })}\r\n    \r\n      \r\n      </Grid>\r\n    </div>\r\n\r\n    </>\r\n  )\r\n}\r\n\r\nexport default FulfilledOr\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}